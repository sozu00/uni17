import java.io.File;
import java.io.IOException;
import java.nio.file.*;
import java.util.*;

public class Indexing {
	
	public void execute() throws IOException{
		/*
		 * TODO:
		 * 	Main de Indexacion:
		 * 		Leer archivos
		 * 		Aplicar filtros
		 * 		Separar palabras
		 * 		Quitar vac√≠as
		 * 			 
		 * 
		 */
		File file = new File(AppPath.DATA); 
		String texto = "";
		ArrayList<String> vText;
		ArrayList<String> vTextProcesado;
		CadenaFiltros CdF = new CadenaFiltros();
		Divisor d = new Divisor();
		CadenaPreprocesadores CdP = new CadenaPreprocesadores();
		
		CdF.add(new filtroMayusculas());
		CdF.add(new filtroRegex("[^-\\w]"));
		CdF.add(new filtroRegex("\\b[0-9]+\\b"));
		CdF.add(new filtroRegex("-+ | -+"));
		CdF.add(new filtroRegex(" +"));
		
		if(file.isDirectory()) {
			for (File f : file.listFiles()) {
		    	texto = new String(Files.readAllBytes(Paths.get(f.getPath())));
		    	texto = CdF.ejecutar(texto);
		    	
		    	vText = new ArrayList<String>(d.extraerPalabras(texto));
		    	vTextProcesado = CdP.ejecutar(vText);
			}
		}
		
		System.out.print(vTextProcesado.toString());

		
		
	}
	
}
